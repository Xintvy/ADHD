<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProductivitÃ© - Nayikoulice</title>
    <link rel="stylesheet" href="/static/style.css">

    <!-- PWA -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#0f172a">
</head>
<body class="home-body">
    <div class="container home-container">
        <div class="greeting">
            <h1 class="greeting-text">Bonjour Nayikoulice ðŸ‘‹</h1>
            <p class="greeting-date">{{ today.strftime('%A %d %B %Y') }}</p>
        </div>

        <div class="today-tasks-main">
            <h2>Aujourd'hui</h2>

            {% if tasks %}
                <div class="tasks-main-list">
                    {% for task in tasks %}
                    <form method="POST" action="/task/toggle/{{ task.id }}" class="task-main-form">
                        <div class="task-main-item {% if task.done %}done{% endif %}" onclick="this.parentElement.submit()">
                            <input type="checkbox" {% if task.done %}checked{% endif %} disabled>
                            <div class="task-main-content">
                                <span class="task-main-title">{{ task.title }}</span>
                                {% if task.time %}<span class="task-main-time">{{ task.time }}</span>{% endif %}
                            </div>
                        </div>
                    </form>
                    {% endfor %}
                </div>
            {% else %}
                <p class="no-tasks">Aucune tÃ¢che pour aujourd'hui ðŸŽ‰</p>
            {% endif %}

            <details class="add-task-quick">
                <summary>+ Ajouter une tÃ¢che</summary>
                <form method="POST" action="/task/add_quick" class="quick-add-form">
                    <input type="hidden" name="task_date" value="{{ today }}">
                    <input type="text" name="title" placeholder="Titre de la tÃ¢che" required>
                    <input type="text" name="time" placeholder="Heure (optionnel)">
                    <button type="submit">Ajouter</button>
                </form>
            </details>
        </div>

        <div class="main-menu">
            <a href="/routine" class="menu-card">ðŸŒ… Routine</a>
            <a href="/reasons" class="menu-card">ðŸ’­ My Reasons</a>
            <a href="/objectives" class="menu-card">ðŸŽ¯ Objectifs</a>
            <a href="/plan" class="menu-card">ðŸ“… Planifier</a>
            <a href="/sobriety" class="menu-card">ðŸš­ SobriÃ©tÃ©</a>
            <a href="/productivity" class="menu-card">ðŸ“Š ProductivitÃ©</a>
        </div>
    </div>

    <!-- PWA -->
    <script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/static/sw.js");
    }
    </script>
</body>
</html>
